# ğŸ“ì •ë¦¬ ë‚´ìš©

- Reactì— Typescript ì ìš©í•˜ê¸°

## ğŸ’¡ ì²˜ìŒ ì•Œê²Œ ëœ ì‚¬ì‹¤

### **ì»¤ìŠ¤í…€ App**

`_app.tsx` íŒŒì¼ì—ì„  ì›¹ì‚¬ì´íŠ¸ ì „ì²´ì— ê³µí†µì ìœ¼ë¡œ ë Œë”ë§ ë˜ëŠ” `App`ì´ë¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¦. ì´ ì»´í¬ë„ŒíŠ¸ì˜ Props í˜•íƒœëŠ” ì •í•´ì ¸ ìˆëŠ”ë°ìš”. `AppProps`ë¼ëŠ” íƒ€ì…ì„ `next/app` íŒ¨í‚¤ì§€ì—ì„œ ë¶ˆëŸ¬ì™€ì„œ ì•„ë˜ì²˜ëŸ¼ ì‚¬ìš©

**\_app.tsx**

```tsx
import Head from "next/head";
import { AppProps } from "next/app";
import Header from "@/components/Header";
import "@/styles/global.css";

export default function App({ Component, pageProps }: AppProps) {
  return (
    <>
      <Head>
        <title>Codeitmall</title>
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Header />
      <Component {...pageProps} />
    </>
  );
}
```

## **í”„ë¦¬ ë Œë”ë§**

### **ì •ì  ìƒì„±**

`Next.js`ì—ì„  ë¹Œë“œ ì‹œì ì— ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ **ë¯¸ë¦¬ ë Œë”ë§**í•´ ë‘˜ ìˆ˜ ìˆëŠ”ë°ìš”. ì´ëŸ° ê±¸ **ì •ì  ìƒì„±**(Static Generation)ì´ë¼ê³  í•©ë‹ˆë‹¤.

```tsx
import Image from "next/image";

export async function getStaticPaths() {
  const res = await fetch("https://learn.codeit.kr/api/codeitmall/products/");
  const data = await res.json();
  const products = data.results;
  const paths = products.map((product) => ({
    params: { id: String(product.id) },
  }));

  return {
    paths,
    fallback: true,
  };
}

export async function getStaticProps(context) {
  const productId = context.params["id"];

  let product;
  try {
    const res = await fetch(
      `https://learn.codeit.kr/api/codeitmall/products/${productId}`
    );
    const data = await res.json();
    product = data;
  } catch {
    return {
      notFound: true,
    };
  }

  return {
    props: {
      product,
    },
  };
}

export default function ProductPage({ product }) {
  return (
    <div>
      <h1>{product.name}</h1>
      <Image src={product.imgUrl} width="480" height="480" alt={product.name} />
    </div>
  );
}
```

ìœ„ ì˜ˆì‹œ ì½”ë“œë¥¼ ì‚´í´ë³´ë©´, `getStaticPaths()`ë¼ëŠ” í•¨ìˆ˜ì—ì„  `https://learn.codeit.kr/api/codeitmall/products/`ë¼ëŠ” API ì£¼ì†Œì— **ë¦¬í€˜ìŠ¤íŠ¸**ë¥¼ ë³´ë‚´ì„œ ìƒí’ˆ ëª©ë¡ **ë°ì´í„°** ë°›ìŒ. ì´ ë°ì´í„°ë¡œ ì•„ì´ë”” ê°’ë“¤ì„ ëª¨ì•„ì„œ `params` ê°’ë“¤ì„ ë§Œë“¤ê³ , ì´ ê°’ì„ ë°”íƒ•ìœ¼ë¡œ `getStaticProps()` í•¨ìˆ˜ì—ì„œëŠ” `context` ê°’ì„ í™œìš©í•´ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë³´ë‚´ì„œ ìƒí’ˆ ë°ì´í„° ë°›ì•„ì˜´. ì´ê±¸ `product`ë¼ëŠ” ì´ë¦„ì˜ Propìœ¼ë¡œ ë‚´ë ¤ì¤Œ.

**Next.js**ì—ì„  ê¸°ë³¸ì ìœ¼ë¡œ **í™”ì‚´í‘œ í•¨ìˆ˜**ë¡œ ë§Œë“  ë‹¤ìŒ ì•„ë˜ì™€ ê°™ì´ `GetStaticPaths`, `GetStaticProps` íƒ€ì… ì§€ì • ê¶Œì¥

[](https://bakey-api.codeit.kr/api/files/resource?root=static&seqId=6844&version=&directory=zy14teobj-image.png&name=zy14teobj-image.png)

`context` ê°’ì— ë§ˆìš°ìŠ¤ë¥¼ í˜¸ë²„í•´ ë³´ë©´ íƒ€ì…ì´ ì˜ ì¶”ë¡ ë¨

```tsx
import { GetStaticPaths, GetStaticProps } from "next";
// ...

export const getStaticPaths: GetStaticPaths = async () => {
  // ...

  return {
    paths,
    fallback: true,
  };
};

export const getStaticProps: GetStaticProps = async (context) => {
  // ...

  return {
    props: {
      product,
    },
  };
};
```

ì´ë²ˆì—” í˜ì´ì§€ì˜ íƒ€ì…ì„ ì •ì˜í•´ ë³´ê² ìŠµë‹ˆë‹¤. ìš°ì„  ì¼ë°˜ì ì¸ ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì˜ Props íƒ€ì…ì„ ì •ì˜í•˜ë“¯ì´ `Props`ë¥¼ ì •ì˜í•˜ê³ ìš”. ì´ê±¸ `getStaticProps()` í•¨ìˆ˜ì˜ **ì œë„¤ë¦­**ìœ¼ë¡œ ì§€ì •í•´ ì¤ë‹ˆë‹¤.

```tsx
interface Props {
  product: Product;
}

export const getStaticProps: GetStaticProps<Props> = async (context) => {
  // ...
  return {
    props: {
      product,
    },
  };
};

export default function ProductPage({ product }: Props) {
  return (
    <div>
      <h1>{product.name}</h1>
      <Image src={product.imgUrl} width="480" height="480" alt={product.name} />
    </div>
  );
}
```

### **ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§**

`Next.js` **ì„œë²„**ì— **ë¦¬í€˜ìŠ¤íŠ¸**ê°€ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ë Œë”ë§ì„ í•´ì„œ ë³´ë‚´ì£¼ëŠ” **ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§**ì˜ ê²½ìš°ì—ë„ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ í•´ì£¼ë©´ ë©ë‹ˆë‹¤. ì•ì—ì„œ ë³´ì•˜ë˜ ì˜ˆì‹œì—ì„œ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ìœ¼ë¡œ ë°”ê¾¼ ì½”ë“œë¥¼ í•œë²ˆ ë³´ê² ìŠµë‹ˆë‹¤.

```tsx
import Image from "next/image";

export async function getServerSideProps(context) {
  const productId = context.params["id"];

  let product;
  try {
    const res = await fetch(
      `https://learn.codeit.kr/api/codeitmall/products/${productId}`
    );
    const data = await res.json();
    product = data;
  } catch {
    return {
      notFound: true,
    };
  }

  return {
    props: {
      product,
    },
  };
}

export default function ProductPage({ product }) {
  return (
    <div>
      <h1>{product.name}</h1>
      <Image src={product.imgUrl} width="480" height="480" alt={product.name} />
    </div>
  );
}
```

`getServerSideProps()` í•¨ìˆ˜ì˜ íƒ€ì…ì€ í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ë§Œë“  ë‹¤ìŒì— `GetServerSideProps`ë¡œ ì§€ì •í•˜ë©´ ë˜ê³ , ë§ˆì°¬ê°€ì§€ë¡œ `Props` íƒ€ì…ë„ ì •ì˜í•œ ë‹¤ìŒ, ì•„ë˜ì²˜ëŸ¼ ì œë„¤ë¦­ìœ¼ë¡œ ì§€ì •í•˜ê³ , í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ì—ë„ ì •ì˜í•˜ë©´ ë¨. ì´ ë¶€ë¶„ì€ ìì£¼ ì“°ì´ë‹ˆ ê¸°ì–µí•´ ë‘ê¸°

```tsx
interface Props {
  product: Product;
}

export const getServerSideProps: GetServerSideProps<Props> = async (
  context
) => {
  // ...
  return {
    props: {
      product,
    },
  };
};

export default function ProductPage({ product }: Props) {
  return (
    <div>
      <h1>{product.name}</h1>
      <Image src={product.imgUrl} width="480" height="480" alt={product.name} />
    </div>
  );
}
```

### **API ë¼ìš°íŠ¸**

ë§ˆì§€ë§‰ìœ¼ë¡œ API ë¼ìš°íŠ¸ì˜ íƒ€ì…ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ **ë¦¬í€˜ìŠ¤íŠ¸**ì™€, **ë¦¬ìŠ¤í°ìŠ¤**ì— **íƒ€ì… ì§€ì •**

```tsx
import type { NextApiRequest, NextApiResponse } from "next";

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  // ...
}
```

## ğŸ“Œ ê¸°ì–µí•  ê²ƒ

### 주제: 웹 인증 방식의 비교와 프론트엔드 토큰 관리(JWT, OAuth, 쿠키/세션 등)

**웹 인증 방식**: 보안과 사용자 경험을 모두 고려해야 하는 중요한 요소.

아래는 대표적인 웹 인증 방식들과 프론트엔드에서의 토큰 관리 방법을 비교한 정리

`CSRF`: **의도하지 않은 요청**을 **공격자**가 대신 \***\*보내는 방식의 **보안 공격\*\*

`XSS`: 웹사이트에 **악성 스크립트**(JavaScript 등)를 **삽입**하여, 사용자의 브라우저에서 실행되게 하는 **공격**(쿠키/계정 탈취)

---

### 🔁 1. 주요 웹 인증 방식 비교

| 인증 방식                     | 설명                                                               | 장점          | 단점 |
| ----------------------------- | ------------------------------------------------------------------ | ------------- | ---- |
| **쿠키/세션**                 | **서버**가 세션을 저장하고, **클라이언트**는 쿠키로 세션 ID를 전달 | - 구현이 간단 |
| - 자동 쿠키 전송 (`HttpOnly`) | - 서버에 상태 저장 필요                                            |

- 서버 확장 어려움 (scale-out)
- CSRF(Cross-Site Request Forgery) 위험 |
  | **JWT (JSON Web Token)** | 로그인 후 토큰을 발급받아 클라이언트가 저장하고 이후 요청에 토큰을 첨부 | - 서버 무상태 (stateless)
- 확장성 뛰어남
- 다양한 서비스 간 인증 공유 가능 | - 토큰 탈취 시 위험 큼
- 토큰 만료 전 강제 로그아웃 어려움
- 클라이언트 저장소에 의존 |
  | **OAuth2** | 제 3자 서비스의 인증을 통해 사용자 인증 (ex: Google, Kakao 로그인) | - 사용자 편의성 ↑
- 비밀번호 입력 없이 인증 가능 | - 복잡한 구현
- 외부 서비스 의존
- 보안 설계 신중해야 함 |

---

### 💻 2. 프론트엔드에서의 토큰 관리

### 🔹 저장 위치 비교

| 저장 방식                         | 설명                                              | 장점                             | 단점                 |
| --------------------------------- | ------------------------------------------------- | -------------------------------- | -------------------- |
| **LocalStorage**                  | 브라우저에 영구 저장                              | - 간단                           |
| - 세션 간 유지                    | - **XSS 공격**에 취약                             |
| - `HttpOnly` 불가                 |
| **SessionStorage**                | 탭을 닫으면 삭제                                  | - 임시 저장에 적합               | - 탭 간 공유 불가    |
| - XSS 위험                        |
| **쿠키 (HttpOnly)**               | 서버가 쿠키에 설정 (`Set-Cookie`)                 | - `HttpOnly`, `Secure` 설정 가능 |
| - 브라우저가 자동으로 쿠키를 전송 | - **CSRF** 위험 (대신 SameSite 속성 등 사용 가능) |
| **메모리 (in-memory)**            | 앱 실행 중에만 유지                               | - 보안 ↑ (XSS/CSRF에 안전)       | - 새로고침 시 사라짐 |
| - UX 설계 필요                    |

### 🔹 일반적인 JWT 처리 흐름 (프론트 기준)

1. 로그인 요청 → JWT 발급
2. JWT 저장 (ex: `localStorage`)
3. 요청 시 `Authorization: Bearer <token>` 헤더에 JWT 포함
4. 로그아웃 시 토큰 제거

※ 보안 향상을 위해 Refresh Token + Access Token 구조로 사용하며, Refresh Token은 `HttpOnly 쿠키`로, Access Token은 메모리 혹은 `localStorage`에 저장하는 패턴이 많이 사용됨.

---

### 🛠 3. 프론트엔드 개발 시 고려사항

- **XSS vs CSRF**
  - `XSS`: LocalStorage/SessionStorage에 저장된 토큰 노출 가능
  - `CSRF`: 쿠키 기반 인증 시 외부 요청 위조 가능
- **권장 패턴**
  - **Access Token**: 메모리나 `localStorage` (짧은 만료시간)
  - **Refresh Token**: `HttpOnly`, `Secure`, `SameSite=Strict` 설정한 쿠키
- **토큰 만료 처리**
  - Access Token 만료 시 → Refresh Token으로 재발급
  - Refresh Token도 만료 시 → 재로그인 필요

---

### 📑 정리

| 항목                 | 쿠키/세션 | JWT                      | OAuth2           |
| -------------------- | --------- | ------------------------ | ---------------- |
| 상태 저장            | 서버 저장 | 무상태 (stateless)       | 제 3자 서버      |
| 확장성               | 낮음      | 높음                     | 높음             |
| 보안 위험            | CSRF      | XSS                      | 외부 서비스 의존 |
| 클라이언트 저장 방식 | 쿠키      | LocalStorage / Memory 등 | 쿠키 or 토큰     |
